<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CRM PB - Cadastro de Clientes</title>
  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Materialize CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet">
  <!-- Google Fonts (Roboto) -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <!-- Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <!-- Custom CSS -->
  <link rel="stylesheet" href="style.css">
</head>
<body class="dark-bg">
  <!-- Sidebar -->
  <ul id="slide-out" class="sidenav sidenav-fixed">
    <li>
      <div class="user-view">
        <div class="background gradient-dark"></div>
        <a href="#name"><span class="white-text name bold">CRM PB</span></a>
      </div>
    </li>
    <li><a href="index.html" class="sidenav-link"><i class="material-icons">people</i><span>Clientes</span></a></li>
    <div id="navbarLinks"></div>
  </ul>
  <a href="#" data-target="slide-out" class="sidenav-trigger"><i class="material-icons">menu</i></a>

  <!-- Header -->
  <header class="header-dark fixed-top">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-auto">
          <h5 class="white-text m-0">Cadastro de Clientes</h5>
        </div>
        <div class="col-auto ms-auto">
          <a href="#" class="user-icon"><i class="material-icons">account_circle</i></a>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="container mt-5 pt-5">
    <div class="row">
      <div class="col-12">
        <div class="card dark-card">
          <div class="card-content">
            <div class="row mb-3 align-items-center">
              <div class="col-12 col-md-6">
                <div class="input-field">
                  <i class="material-icons prefix">search</i>
                  <input id="filtroInput" type="text" class="white-text" placeholder="Buscar clientes...">
                </div>
              </div>
              <div class="col-12 col-md-6 text-end">
                <button class="btn waves-effect btn-dark" onclick="abrirModal()">
                  <i class="material-icons left">add</i>Adicionar Cliente
                </button>
                <label for="fileInput" class="btn waves-effect btn-dark">
                  <i class="material-icons left">upload</i>Importar
                  <input type="file" id="fileInput" accept=".json" style="display:none">
                </label>
                <button class="btn waves-effect btn-dark" onclick="exportarPDF()">
                  <i class="material-icons left">picture_as_pdf</i>Exportar PDF
                </button>
                <button class="btn waves-effect btn-dark" onclick="exportarJSON()">
                  <i class="material-icons left">data_object</i>Exportar JSON
                </button>
                <button id="limparFiltros" class="btn waves-effect btn-dark">
                  <i class="material-icons left">clear</i>Limpar Filtros
                </button>
              </div>
            </div>
            <div class="table-container">
              <table class="highlight clientes-table responsive-table">
                <thead>
                  <tr>
                    <th>Código<i class="material-icons filter-icon" data-column="codigo">filter_list</i></th>
                    <th>Nome<i class="material-icons filter-icon" data-column="nome">filter_list</i></th>
                    <th>Razão Social<i class="material-icons filter-icon" data-column="razao_social">filter_list</i></th>
                    <th>CPF/CNPJ<i class="material-icons filter-icon" data-column="cpf_cnpj">filter_list</i></th>
                    <th>Regime Fiscal<i class="material-icons filter-icon" data-column="regime_fiscal">filter_list</i></th>
                    <th>Situação<i class="material-icons filter-icon" data-column="situacao">filter_list</i></th>
                    <th>Tipo Pessoa<i class="material-icons filter-icon" data-column="tipo_pessoa">filter_list</i></th>
                    <th>Estado<i class="material-icons filter-icon" data-column="estado">filter_list</i></th>
                    <th>Município<i class="material-icons filter-icon" data-column="municipio">filter_list</i></th>
                    <th>Status<i class="material-icons filter-icon" data-column="status">filter_list</i></th>
                    <th>Possui I.E.?<i class="material-icons filter-icon" data-column="possui_ie">filter_list</i></th>
                    <th>I.E.<i class="material-icons filter-icon" data-column="ie">filter_list</i></th>
                    <th>Filial<i class="material-icons filter-icon" data-column="filial">filter_list</i></th>
                    <th>Matriz<i class="material-icons filter-icon" data-column="empresa_matriz">filter_list</i></th>
                    <th>Grupo<i class="material-icons filter-icon" data-column="grupo">filter_list</i></th>
                    <th>Segmento<i class="material-icons filter-icon" data-column="segmento">filter_list</i></th>
                    <th>Data de Entrada<i class="material-icons filter-icon" data-column="data_entrada">filter_list</i></th>
                    <th>Data de Saída<i class="material-icons filter-icon" data-column="data_saida">filter_list</i></th>
                    <th>Sistema<i class="material-icons filter-icon" data-column="sistema">filter_list</i></th>
                    <th>Tipo de Serviço<i class="material-icons filter-icon" data-column="tipo_servico">filter_list</i></th>
                    <th class="fixed-action">Ações</th>
                  </tr>
                </thead>
                <tbody id="clientesBody"></tbody>
              </table>
            </div>
            <div class="row mt-3">
              <div class="col-12 text-center">
                <span id="paginacaoInfo" class="white-text"></span>
                <ul class="pagination">
                  <li><a href="#!" onclick="irParaPrimeiraPagina()" class="white-text">Primeira</a></li>
                  <li><a href="#!" onclick="irParaPaginaAnterior()" class="white-text">Anterior</a></li>
                  <li><a href="#!" onclick="irParaProximaPagina()" class="white-text">Próxima</a></li>
                  <li><a href="#!" onclick="irParaUltimaPagina()" class="white-text">Última</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal -->
    <div id="clienteModal" class="modal">
      <div class="modal-content dark-card">
        <h4 id="clienteModalLabel" class="white-text">Adicionar Cliente</h4>
        <form id="clienteForm">
          <input type="hidden" id="clienteIndex">
          <div class="row">
            <div class="input-field col-12 col-md-6">
              <i class="material-icons prefix">code</i>
              <input id="codigo" type="text" required>
              <label for="codigo">Código Interno *</label>
            </div>
            <div class="input-field col-12 col-md-6">
              <i class="material-icons prefix">person</i>
              <input id="nome" type="text" required>
              <label for="nome">Nome/Apelido *</label>
            </div>
            <div class="input-field col-12 col-md-6">
              <i class="material-icons prefix">business</i>
              <input id="razao_social" type="text">
              <label for="razao_social">Razão Social</label>
            </div>
            <div class="input-field col-12 col-md-6">
              <i class="material-icons prefix">badge</i>
              <input id="cpf_cnpj" type="text" required>
              <label for="cpf_cnpj">CPF/CNPJ *</label>
            </div>
            <div class="input-field col-12 col-md-6">
              <i class="material-icons prefix">account_balance</i>
              <select id="regime_fiscal">
                <option value="Simples Nacional">Simples Nacional</option>
                <option value="Lucro Presumido">Lucro Presumido</option>
                <option value="Lucro Real">Lucro Real</option>
              </select>
              <label>Regime Fiscal</label>
            </div>
            <div class="input-field col-12 col-md-6">
              <i class="material-icons prefix">trending_up</i>
              <select id="situacao">
                <option value="Com movimento">Com movimento</option>
                <option value="Sem movimento">Sem movimento</option>
              </select>
              <label>Situação</label>
            </div>
            <div class="input-field col-12 col-md-6">
              <i class="material-icons prefix">person_outline</i>
              <select id="tipo_pessoa">
                <option value="Física">Física</option>
                <option value="Jurídica">Jurídica</option>
              </select>
              <label>Tipo de Pessoa</label>
            </div>
            <div class="input-field col-12 col-md-6">
              <i class="material-icons prefix">location_on</i>
              <select id="estado">
                <option value="Acre">Acre</option>
                <option value="Alagoas">Alagoas</option>
                <option value="Amapá">Amapá</option>
                <option value="Amazonas">Amazonas</option>
                <option value="Bahia">Bahia</option>
                <option value="Ceará">Ceará</option>
                <option value="Distrito Federal">Distrito Federal</option>
                <option value="Espírito Santo">Espírito Santo</option>
                <option value="Goiás">Goiás</option>
                <option value="Maranhão">Maranhão</option>
                <option value="Mato Grosso">Mato Grosso</option>
                <option value="Mato Grosso do Sul">Mato Grosso do Sul</option>
                <option value="Minas Gerais">Minas Gerais</option>
                <option value="Pará">Pará</option>
                <option value="Paraíba">Paraíba</option>
                <option value="Paraná">Paraná</option>
                <option value="Pernambuco">Pernambuco</option>
                <option value="Piauí">Piauí</option>
                <option value="Rio de Janeiro">Rio de Janeiro</option>
                <option value="Rio Grande do Norte">Rio Grande do Norte</option>
                <option value="Rio Grande do Sul">Rio Grande do Sul</option>
                <option value="Rondônia">Rondônia</option>
                <option value="Roraima">Roraima</option>
                <option value="Santa Catarina">Santa Catarina</option>
                <option value="São Paulo">São Paulo</option>
                <option value="Sergipe">Sergipe</option>
                <option value="Tocantins">Tocantins</option>
              </select>
              <label>Estado</label>
            </div>
            <div class="input-field col-12 col-md-6">
              <i class="material-icons prefix">location_city</i>
              <input id="municipio" type="text">
              <label for="municipio">Município</label>
            </div>
            <div class="input-field col-12 col-md-6">
              <i class="material-icons prefix">star</i>
              <select id="status">
                <option value="Ativo">Ativo</option>
                <option value="Inativo">Inativo</option>
                <option value="Potencial">Potencial</option>
                <option value="Bloqueado">Bloqueado</option>
              </select>
              <label>Status</label>
            </div>
            <div class="input-field col-12 col-md-6">
              <i class="material-icons prefix">description</i>
              <select id="possui_ie">
                <option value="Sim">Sim</option>
                <option value="Não">Não</option>
                <option value="Isento">Isento</option>
              </select>
              <label>Possui I.E.?</label>
            </div>
            <div class="input-field col-12 col-md-6">
              <i class="material-icons prefix">fingerprint</i>
              <input id="ie" type="text">
              <label for="ie">Inscrição Estadual (I.E.)</label>
            </div>
            <div class="input-field col-12 col-md-6">
              <i class="material-icons prefix">business_center</i>
              <select id="filial">
                <option value="Sim">Sim</option>
                <option value="Não">Não</option>
              </select>
              <label>Filial</label>
            </div>
            <div class="input-field col-12 col-md-6">
              <i class="material-icons prefix">domain</i>
              <input id="empresa_matriz" type="text">
              <label for="empresa_matriz">Empresa Matriz</label>
            </div>
            <div class="input-field col-12 col-md-6">
              <i class="material-icons prefix">group</i>
              <input id="grupo" type="text">
              <label for="grupo">Grupo</label>
            </div>
            <div class="input-field col-12 col-md-6">
              <i class="material-icons prefix">category</i>
              <select id="segmento">
                <option value="">Selecione</option>
                <option value="Comércio">Comércio</option>
                <option value="Holding">Holding</option>
                <option value="Indústria">Indústria</option>
                <option value="Locação">Locação</option>
                <option value="Produtor Rural">Produtor Rural</option>
                <option value="Serviço">Serviço</option>
                <option value="Transporte">Transporte</option>
              </select>
              <label>Segmento</label>
            </div>
            <div class="input-field col-12 col-md-6">
              <i class="material-icons prefix">event</i>
              <input id="data_entrada" type="date">
              <label for="data_entrada">Data de Entrada</label>
            </div>
            <div class="input-field col-12 col-md-6">
              <i class="material-icons prefix">event_busy</i>
              <input id="data_saida" type="date">
              <label for="data_saida">Data de Saída</label>
            </div>
            <div class="input-field col-12 col-md-6">
              <i class="material-icons prefix">settings</i>
              <select id="sistema">
                <option value="">Selecione</option>
                <option value="Domínio">Domínio</option>
                <option value="Protheus">Protheus</option>
                <option value="Rodopar">Rodopar</option>
                <option value="SAP">SAP</option>
                <option value="Senior">Senior</option>
                <option value="Outros">Outros</option>
              </select>
              <label>Sistema</label>
            </div>
            <div class="col-12">
              <h6 class="white-text">Tipo de Serviço</h6>
              <div id="tipo_servico">
                <p><label><input type="checkbox" value="Escrita Fiscal,Contábil,Departamento Pessoal" id="tipo_servico_combinado"><span>Escrita Fiscal, Contábil, DP</span></label></p>
                <p><label><input type="checkbox" value="Escrita Fiscal,Contábil" id="tipo_servico_combinado2"><span>Escrita Fiscal, Contábil</span></label></p>
                <p><label><input type="checkbox" value="Escrita Fiscal"><span>Escrita Fiscal</span></label></p>
                <p><label><input type="checkbox" value="Departamento Pessoal"><span>Departamento Pessoal</span></label></p>
                <p><label><input type="checkbox" value="Departamento Pessoal Parcial"><span>Departamento Pessoal Parcial</span></label></p>
                <p><label><input type="checkbox" value="Societário"><span>Societário</span></label></p>
                <p><label><input type="checkbox" value="BPO Financeiro"><span>BPO Financeiro</span></label></p>
                <p><label><input type="checkbox" value="Consultoria Tributária"><span>Consultoria Tributária</span></label></p>
                <p><label><input type="checkbox" value="Consultoria Jurídica"><span>Consultoria Jurídica</span></label></p>
                <p><label><input type="checkbox" value="Consultoria Reforma Tributária"><span>Consultoria Reforma Tributária</span></label></p>
                <p><label><input type="checkbox" value="Treinamento Fiscal e Financeiro"><span>Treinamento Fiscal e Financeiro</span></label></p>
                <p><label><input type="checkbox" value="Treinamento Fiscal"><span>Treinamento Fiscal</span></label></p>
                <p><label><input type="checkbox" value="Treinamento Financeiro"><span>Treinamento Financeiro</span></label></p>
                <p><label><input type="checkbox" value="Serviço Extra"><span>Serviço Extra</span></label></p>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn waves-effect btn-dark" data-bs-dismiss="modal">
              <i class="material-icons left">close</i>Cancelar
            </button>
            <button type="submit" class="btn waves-effect btn-gradient">
              <i class="material-icons left">save</i>Salvar
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Toasts -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
      <div id="successToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header green-bg white-text">
          <strong class="me-auto">Sucesso</strong>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body dark-bg" id="successToastMessage"></div>
      </div>
      <div id="errorToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header red-bg white-text">
          <strong class="me-auto">Erro</strong>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body dark-bg" id="errorToastMessage"></div>
      </div>
    </div>
  </main>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="config.js" ></script>
  <script src="auth.js"></script>
  <script src="script.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      M.AutoInit();
    });
  </script>
</body>
</html>